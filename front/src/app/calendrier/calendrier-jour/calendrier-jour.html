<div class="p-6 sm:p-8 bg-white rounded-xl shadow-2xl border border-gray-200">

  <div class="mb-6 flex justify-between items-center border-b pb-4">

    <h2 class="text-3xl font-bold text-slate-800 flex items-center">
      <svg class="w-8 h-8 mr-3 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"
        xmlns="http://www.w3.org/2000/svg">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
          d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
      </svg>
      Agenda du Jour
    </h2>

    <div class="flex space-x-3 items-center">
      <button (click)="goToToday()"
        class="px-4 py-2 text-sm font-medium rounded-lg text-white bg-indigo-600 hover:bg-indigo-700 transition duration-150 flex items-center">
        Aujourd'hui
      </button>

      <button (click)="changeDay(-1)"
        class="px-3 py-2 text-sm font-medium rounded-lg text-gray-700 bg-gray-200 hover:bg-gray-300 transition duration-150">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
        </svg>
      </button>

      <span class="text-lg font-semibold text-slate-800 whitespace-nowrap">
        {{ date | date:'EEEE dd MMMM yyyy' }}
      </span>

      <button (click)="changeDay(1)"
        class="px-3 py-2 text-sm font-medium rounded-lg text-gray-700 bg-gray-200 hover:bg-gray-300 transition duration-150">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
        </svg>
      </button>

      <button
        class="px-4 py-2 text-sm font-medium rounded-lg text-white bg-red-600 hover:bg-red-700 transition duration-150 flex items-center ml-4">
        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"
          xmlns="http://www.w3.org/2000/svg">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
        </svg>
        Ajouter Audience
      </button>
    </div>
  </div>

  <div class="border border-gray-300 rounded-lg shadow-inner flex">

    <div class="flex-shrink-0 w-20 bg-gray-100 border-r border-gray-300">
      <div class="h-14 text-xs font-semibold text-gray-700 flex items-center justify-center border-b border-gray-300">
        Heures</div>

      <div *ngFor="let hour of hours"
        class="h-16 text-xs text-gray-500 font-medium flex justify-end pr-2 items-start pt-1 border-b border-dashed border-gray-300">
        {{ hour }}:00
      </div>
    </div>

    <div (click)="handleGridClick($event)" class="flex-grow bg-white relative h-[704px] cursor-pointer">

      <ng-container *ngFor="let hour of hours">
      </ng-container>

      <div *ngFor="let hearing of dayHearings" (click)="$event.stopPropagation()"
        class="absolute p-1.5 rounded-lg border-l-4 shadow-md cursor-pointer hover:shadow-lg transition duration-150"
        [ngClass]="getStatusClass(hearing.status)" [style.top]="hearing.style.top" [style.height]="hearing.style.height"
        [style.width]="hearing.style.width" [style.left]="hearing.style.left" [style.zIndex]="hearing.style.zIndex">

        <p class="text-[11px] font-bold truncate">{{ hearing.title }}</p>
        <p class="text-[10px] font-medium mt-0.5 truncate">
          <span class="font-semibold">Heure :</span> {{ hearing.time }} - {{ hearing.endTime }}
        </p>
        <p class="text-[10px] text-gray-500 font-medium truncate">{{ hearing.clientCase }}</p>
      </div>

      <div *ngIf="dayHearings.length === 0"
        class="text-center p-8 text-gray-500 italic absolute top-1/2 left-0 right-0 transform -translate-y-1/2">
        Aucune audience prévue pour ce jour.
      </div>
    </div>
  </div>

  <div class="mt-6 text-sm text-gray-600">
    <p class="font-semibold">Légende Statut :</p>
    <span
      class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 border border-red-400 mr-2">Urgent</span>
    <span
      class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 border border-blue-400 mr-2">Standard</span>
    <span
      class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-600 border border-gray-400">Reporté</span>
  </div>
</div>
